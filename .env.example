# ============================================
# SMarket - Environment Configuration
# ============================================

# App
DEBUG=false
APP_NAME=SMarket API

# Database (PostgreSQL)
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://user:pass@postgres:5432/db
# Set to true to see SQL queries in logs (useful for debugging)
DB_ECHO=false

# PostgreSQL credentials (for docker-compose)
POSTGRES_USER=user
POSTGRES_PASSWORD=pass
POSTGRES_DB=db

# JWT Authentication
# Generate a strong secret key: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-this-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# AI/LLM Providers (Configure at least one)
# ============================================

# OpenAI API - Get your key at: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-your-openai-api-key

# Google Gemini API - Get your key at: https://makersuite.google.com/app/apikey
# GEMINI_API_KEY=your-gemini-api-key
# GEMINI_MODEL=gemini-1.5-flash

# Anthropic Claude API - Get your key at: https://console.anthropic.com/
# Available models: claude-3-5-sonnet-20241022, claude-3-haiku-20240307, claude-3-opus-20240229
# ANTHROPIC_API_KEY=your-anthropic-api-key
# ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# OpenRouter API - Get your key at: https://openrouter.ai/keys
# Allows testing many models (Gemini, Claude, GPT, Llama, etc.) with a single API key
# See available models: https://openrouter.ai/models
# OPENROUTER_API_KEY=sk-or-v1-your-openrouter-api-key
# OPENROUTER_MODEL=google/gemini-2.0-flash-001
# OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# ============================================
# Cache & External Services
# ============================================

# Redis connection string
REDIS_URL=redis://redis:6379/0

# Sefaz (Brazilian Tax Authority) - NFC-e consultation
SEFAZ_API_URL=https://www.nfce.fazenda.sp.gov.br/NFCeConsultaPublica

# CORS - Allowed origins (comma-separated)
# For production, add your frontend domain
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# ============================================
# CNPJ Features (Validation & Enrichment)
# ============================================
# Master flag - Disable all CNPJ features at once
ENABLE_CNPJ_FEATURES=true

# Validate CNPJ checksum before saving invoices
ENABLE_CNPJ_VALIDATION=true

# Enrich merchant data from BrasilAPI/ReceitaWS public APIs
ENABLE_CNPJ_ENRICHMENT=true

# API timeout in seconds (1-30)
CNPJ_API_TIMEOUT=5

# Cache TTL in seconds (86400 = 24 hours)
CNPJ_CACHE_TTL=86400

# Quick disable examples:
# - Emergency rollback: ENABLE_CNPJ_FEATURES=false
# - Disable validation only: ENABLE_CNPJ_VALIDATION=false
# - Disable enrichment only: ENABLE_CNPJ_ENRICHMENT=false
# - No cache: CNPJ_CACHE_TTL=0
# See FEATURE_FLAGS.md for detailed configuration guide

# ============================================
# Frontend (Next.js)
# ============================================
# API URL for frontend to connect to backend
NEXT_PUBLIC_API_URL=http://localhost:8000
NODE_ENV=development

# ============================================
# Deployment (Dokploy/Production)
# ============================================
# These variables are automatically set by Dokploy:
# - PORT (usually 8000)
# - DATABASE_URL (if using Dokploy's PostgreSQL)
